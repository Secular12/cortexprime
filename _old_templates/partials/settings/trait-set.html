<article class="{{viewClasses (concat 'traitSet-' actorTypeIndex '-' traitSetIndex) breadcrumbs}} trait-set">
  <header class="flex flex-ac py-2 relative-section">
    <div class="section-background"></div>
    <div class="flex-col col-12">
      <input class="breadcrumb-name-change input-cpt" data-target="{{concat 'traitSet-' actorTypeIndex '-' traitSetIndex}}" name="{{concat 'actorTypes.' path '.' traitSetIndex '.label'}}" type="text" value="{{traitSet.label}}">
    </div>
    <div class="flex-col">
      {{> "systems/cortexprime/templates/partials/remove-button.html"
        group=path
        itemKey=traitSetIndex
        itemName=traitSet.label
        setting='actorTypes'
        type="trash"
      }}
    </div>
  </header>
  <div>
    <div class="relative-section pa-2">
      <div class="section-background"></div>
      <label class="flex flex-ac">
        <div class="checkmark-container">
          <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.hasDescription'}}" type="checkbox" {{checked
            traitSet.hasDescription}}>
          <div class="checkmark-cpt"></div>
        </div>
        <span class="input-label-cpt mb-0 ml-2">{{localize 'HasDescription'}}</span>
      </label>
      {{#if traitSet.hasDescription}}
        <span class="input-label-cpt mt-1">{{localize 'Description'}}</span>
        <textarea class="input-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.description'}}">{{traitSet.description}}</textarea>
      {{/if}}
    </div>
  </div>
  <section>
    <header>
      <div class="separator-cpt"></div>
      <div class="flex py-1 relative-section">
        <div class="section-background-alternate"></div>
        <h3 class="flex-col section-primary-title-cpt">{{localize 'TraitSettings'}}</h3>
      </div>
      <div class="separator-cpt"></div>
      <div class="pa-2 relative-section">
        <div class="section-background-alternate"></div>
        <p>{{localize 'TraitSettingsDescription'}}</p>
      </div>
      <div class="separator-cpt"></div>
    </header>
    <div class="py-2 relative-section">
      <div class="section-background"></div>
      <div class="pb-2">
        <header class="px-1 mb-1">
          <h3 class="section-secondary-title-cpt">{{localize 'GeneralTraitSettings'}}</h2>
        </header>
        <div class="flex flex-wrap">
          <div class="flex-col col-6">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasDescription'}}" type="checkbox" {{checked
                  traitSet.settings.hasDescription}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'HasDescription'}}</span>
            </label>
          </div>
          <div class="flex-col col-6">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasLabel'}}" type="checkbox"
                  {{checked traitSet.settings.hasLabel}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'HasLabels'}}</span>
            </label>
          </div>
          <div class="flex-col col-6">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasDescriptors'}}" type="checkbox" {{checked
                  traitSet.settings.hasDescriptors}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'HasDescriptors'}}</span>
            </label>
          </div>
          <div class="flex-col col-6">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasSfx'}}" type="checkbox" {{checked
                  traitSet.settings.hasSfx}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'HasSfx'}}</span>
            </label>
          </div>
        </div>
      </div>
      <div class="flex">
        <div class="flex-col col-6">
          <header class="mb-1">
            <h3 class="section-secondary-title-cpt">{{localize 'SubTraitSettings'}}</h3>
          </header>
          <div>
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasSubTraits'}}" type="checkbox" {{checked
                  traitSet.settings.hasSubTraits}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'HasSubTraits'}}</span>
            </label>
          </div>
          <div class="{{ternary (not traitSet.settings.hasSubTraits) 'shutdown' ''}}">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.subTraitsHaveDice'}}" type="checkbox" {{checked
                  traitSet.settings.subTraitsHaveDice}}{{{ternary (not traitSet.settings.hasSubTraits) ' disabled="disabled"' ''}}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'SubTraitsHaveDice'}}</span>
            </label>
          </div>
          <div class="{{ternary (or (not traitSet.settings.hasSubTraits) (not traitSet.settings.subTraitsHaveDice)) 'shutdown' ''}}">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.subTraitsDiceConsumable'}}" type="checkbox"
                  {{checked traitSet.settings.subTraitsDiceConsumable}}{{{ternary (or (not traitSet.settings.hasSubTraits) (not traitSet.settings.subTraitsHaveDice)) ' disabled="disabled"' ''}}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'ConsumableDice'}}</span>
            </label>
          </div>
        </div>
        <div class="flex-col col-6">
          <header class="mb-1">
            <h3 class="section-secondary-title-cpt">{{localize 'DiceSettings'}}</h2>
          </header>
          <div>
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.hasDice'}}" type="checkbox" {{checked
                  traitSet.settings.hasDice}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'HasDice'}}</span>
            </label>
          </div>
          <div class="{{ternary (not traitSet.settings.hasDice) 'shutdown' ''}}">
            <label class="flex flex-ac">
              <div class="checkmark-container">
                <input class="input-checkbox-cpt" name="{{concat 'actorTypes.' path '.' traitSetIndex '.settings.diceConsumable'}}" type="checkbox" {{checked
                  traitSet.settings.diceConsumable}}{{{ternary (not traitSet.settings.hasDice) ' disabled="disabled"' '' }}}>
                <div class="checkmark-cpt"></div>
              </div>
              <span class="input-label-cpt mb-0 ml-2">{{localize 'ConsumableDice'}}</span>
            </label>
          </div>
        </div>
      </div>
    </div>
    <div class="separator-cpt"></div>
    <div class="relative-section pa-2">
      <div class="section-background-alternate"></div>
      <p class="my-2"><span class="descriptor-label-cpt">{{localize 'HasLabels'}}:</span> {{localize 'HasLabelsDescription'}}</p>
      <p class="my-2"><span class="descriptor-label-cpt">{{localize 'ConsumableDice'}}:</span> {{localize 'ConsumableDiceDescription'}}</p>
    </div>
    <div class="separator-cpt"></div>
    <div class="relative-section">
      <div class="section-background-alternate"></div>
      <div class="flex flex-ac flex-jsb py-1">
        <h3 class="flex-col col-12 section-primary-title-cpt">{{localize 'PresetTraits'}}</h3>
        <div class="flex-col">
          <button class="btn btn-primary-cpt btn-icon add-trait" data-path="{{path}}" data-actor-type="{{actorTypeIndex}}" data-trait-set="{{traitSetIndex}}" type="button">
            <i class="fa fa-plus"></i>
          </button>
        </div>
      </div>
    </div>
    <div class="separator-cpt"></div>
    <div class="relative-section pa-2">
      <div class="section-background-alternate"></div>
      <p>{{localize 'PresetTraitsDescription'}}</p>
    </div>
    {{#if (listHasMore traitSet.traits 0)}}
      <div class="separator-cpt"></div>
    {{/if}}
    <ul class="list-style-none px-0 my-0">
      {{#each traitSet.traits as |trait traitIndex|}}
        <li class="pa-1 flex flex-ac flex-jsb relative-section">
          <div class="{{ternary (eq (mod traitIndex 2) 0) 'section-background' 'section-background-alternate'}}"></div>
          <div class="flex-col flex-row flex-ac">
            {{> "systems/cortexprime/templates/partials/reorder.html"
              class="flex-col pa-0"
              path=(concat ../path '.' ../traitSetIndex '.traits')
              currentIndex=traitIndex
              setting="actorTypes"
            }}
            <span class="section-secondary-title-cpt flex-col">{{or trait.name (concat '[' (localize 'NoName' ) ']')}}</span>
          </div>
          <div class="flex-col flex-row flex-ac">
            <div class="flex-col px-0">
              <button class="btn btn-icon btn-icon-plain-cpt duplicate-item" data-path="{{concat ../path '.' ../traitSetIndex '.traits'}}"
                data-id="{{trait.id}}" type="button">
                <i class="fa fa-clone"></i>
              </button>
            </div>
            <div class="flex-col px-0">
              <button class="view-change btn btn-icon btn-icon-plain-cpt" data-name="{{trait.name}}" data-to="trait-{{../actorTypeIndex}}-{{../traitSetIndex}}-{{traitIndex}}" type="button">
                <i class="fa fa-edit ma-0"></i>
              </button>
            </div>
          </div>
        </li>
      {{/each}}
    </ul>
  </section>
</article>
